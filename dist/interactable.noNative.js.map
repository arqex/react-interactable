{"version":3,"file":"interactable.noNative.js","sources":["../playground/src/react-interactable/Utils.js","../playground/src/react-interactable/Behaviors.js","../playground/src/react-interactable/Animator.js","../playground/src/react-interactable/InteractableView.js","../playground/src/react-interactable/AnimatedView.js","../playground/src/react-interactable/noNative.js"],"sourcesContent":["export default {\r\n\tcreateArea: function( boundaries ){\r\n\t\treturn {\r\n\t\t\tminPoint: {\r\n\t\t\t\tx: boundaries.left === undefined ? -Infinity : boundaries.left,\r\n\t\t\t\ty: boundaries.top === undefined ? -Infinity : boundaries.top\r\n\t\t\t},\r\n\t\t\tmaxPoint: {\r\n\t\t\t\tx: boundaries.right === undefined ? Infinity : boundaries.right,\r\n\t\t\t\ty: boundaries.bottom === undefined ? Infinity : boundaries.bottom\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreateAreaFromRadius: function( radius, anchor ){\r\n\t\treturn {\r\n\t\t\tminPoint: {x: anchor.x - radius, y: anchor.y - radius},\r\n\t\t\tmaxPoint: {x: anchor.x + radius, y: anchor.y + radius}\r\n\t\t}\r\n\t},\r\n\tisPointInArea: function( {x, y}, area ){\r\n\t\tif( !area ) return true\r\n\r\n\t\tlet { minPoint, maxPoint } = area\r\n\r\n\t\treturn x>=minPoint.x && x <= maxPoint.x && y >= minPoint.y && y <= maxPoint.y\r\n\t},\r\n\tfindClosest: function( origin, points ){\r\n\t\tlet minDistance = Infinity;\r\n\t\tlet closestPoint = null;\r\n\t\tlet distances = []\r\n\t\tpoints.forEach( point => {\r\n\t\t\tlet distance = this.getDistance( point, origin );\r\n\t\t\tdistances.push( distance )\r\n\t\t\tif (distance < minDistance) {\r\n\t\t\t\tminDistance = distance;\r\n\t\t\t\tclosestPoint = point;\r\n\t\t\t}\r\n\t\t})\r\n\t\t// console.log( distances )\r\n\t\treturn closestPoint\r\n\t},\r\n\tgetDistance( point, relative ){\r\n\t\tlet p = {x: point.x === undefined ? Infinity : point.x, y: point.y === undefined ? Infinity : point.y }\r\n\t\tlet r = {x: relative.x === undefined ? Infinity : relative.x, y: relative.y === undefined ? Infinity : relative.y }\r\n\t\tif( p.x === Infinity && p.y === Infinity ) return Infinity\r\n\t\tlet dx = p.x === Infinity ? 0 : Math.abs(r.x - p.x)\r\n\t\tlet dy = p.y === Infinity ? 0 : Math.abs(r.y - p.y)\r\n\t\t\r\n\t\treturn Math.sqrt( dx*dx + dy*dy )\r\n\t},\r\n\tgetDelta( point, origin ){\r\n\t\treturn {\r\n\t\t\tx: point.x - origin.x,\r\n\t\t\ty: point.y - origin.y\r\n\t\t}\r\n\t}\r\n}","import Utils from './Utils'\r\n\r\nfunction def( value, defaultValue ){\r\n\treturn value === undefined ? defaultValue : value\r\n}\r\n\r\nexport default {\r\n\tanchor: {\r\n\t\tcreate: (options, isTemp = false) => (\r\n\t\t\t{ x0: options.x, y0: options.y, priority: 1, isTemp, type: 'anchor' }\r\n\t\t),\r\n\t\tdoFrame: (options, deltaTime, state, coords ) => {\r\n\t\t\t// Velocity = dx / deltaTime\r\n\t\t\tstate.vx = (options.x0 - coords.x) / deltaTime\r\n\t\t\tstate.vy = (options.y0 - coords.y) / deltaTime\r\n\t\t}\r\n\t},\r\n\r\n\tbounce: {\r\n\t\tcreate: (options, isTemp = false) => ({\r\n\t\t\ttype: 'bounce',\r\n\t\t\tbounce: def(options.bounce, .5),\r\n\t\t\tminPoint: options.influence.minPoint,\r\n\t\t\tmaxPoint: options.influence.maxPoint,\r\n\t\t\tpriority: 3,\r\n\t\t\tisTemp\r\n\t\t}),\r\n\t\tdoFrame: ({minPoint, maxPoint, bounce}, deltaTime, state, {x,y}, target ) => {\r\n\t\t\t// Apply limits\r\n\r\n\t\t\tif (minPoint.x > x) target.setTranslationX(minPoint.x);\r\n\t\t\tif (minPoint.y > y) target.setTranslationY(minPoint.y);\r\n\t\t\tif (maxPoint.x < x) target.setTranslationX(maxPoint.x);\r\n\t\t\tif (maxPoint.y < y) target.setTranslationY(maxPoint.y);\r\n\r\n\t\t\tlet { vx, vy } = state\r\n\r\n\t\t\tif (minPoint.x > x && vx < 0) {\r\n\t\t\t\tstate.vx = -vx * bounce\r\n\t\t\t}\r\n\t\t\tif (minPoint.y > y && vy < 0) {\r\n\t\t\t\tstate.vy= -vy * bounce\r\n\t\t\t}\r\n\t\t\tif (maxPoint.x < x && vx > 0) {\r\n\t\t\t\tstate.vx = -vx * bounce\r\n\t\t\t}\r\n\t\t\tif (maxPoint.y < y && vy > 0) {\r\n\t\t\t\tstate.vy = -vy * bounce\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tfriction: {\r\n\t\tcreate: ( options, isTemp = false ) => ({\r\n\t\t\ttype: 'friction',\r\n\t\t\tdamping: def(options.damping, .7),\r\n\t\t\tinfluence: Utils.createArea( options.influenceArea || {} ),\r\n\t\t\tpriority: 2,\r\n\t\t\tisTemp\r\n\t\t}),\r\n\t\tdoFrame: (options, deltaTime, state, coords) => {\r\n\t\t\tif( !Utils.isPointInArea( coords, options.influence) ) return;\r\n\t\t\t\r\n\t\t\tlet pow = Math.pow(options.damping, 60.0 * deltaTime)\r\n\t\t\tstate.vx = pow * state.vx\r\n\t\t\tstate.vy = pow * state.vy\r\n\t\t}\r\n\t},\r\n\r\n\tgravity: {\r\n\t\tcreate: ( options, isTemp = false ) => ({\r\n\t\t\ttype: 'gravity',\r\n\t\t\tx0: def(options.x, Infinity),\r\n\t\t\ty0: def(options.y, Infinity),\r\n\t\t\tstrength: def(options.strength, 400),\r\n\t\t\tfalloff: def(options.falloff, 40),\r\n\t\t\tdamping: def(options.damping, 0),\r\n\t\t\tinfluence: Utils.createArea(options.influenceArea || {}),\r\n\t\t\tisTemp,\r\n\t\t\tpriority: 1\r\n\t\t}),\r\n\t\tdoFrame: (options, deltaTime, state, coords) => {\r\n\t\t\tif( !Utils.isPointInArea( coords, options.influence) ) return;\r\n\r\n\t\t\tlet dx = options.x0 !== Infinity ? coords.x - options.x0 : 0;\r\n\t\t\tlet dy = options.y0 !== Infinity ? coords.y - options.y0 : 0;\r\n\t\t\tlet dr = Math.sqrt(dx * dx + dy * dy);\r\n\r\n\t\t\tif (!dr) return;\r\n\r\n\t\t\tlet { falloff, strength } = options\r\n\t\t\tlet a = (-strength * dr * Math.exp(-0.5 * (dr * dr) / (falloff * falloff))) / state.mass;\r\n\r\n\t\t\tlet ax = dx / dr * a;\r\n\t\t\tlet ay = dy / dr * a;\r\n\r\n\t\t\tstate.vx += deltaTime * ax\r\n\t\t\tstate.vy += deltaTime * ay\r\n\t\t}\r\n\t},\r\n\r\n\tspring: {\r\n\t\tcreate: ( options, isTemp = false ) => ({\r\n\t\t\ttype: 'spring',\r\n\t\t\tx0: def(options.x, 0),\r\n\t\t\ty0: def(options.y, 0),\r\n\t\t\ttension: def(options.tension, 300),\r\n\t\t\tinfluence: Utils.createArea( options.influenceArea || {} ),\r\n\t\t\tisTemp,\r\n\t\t\tpriority: 1\r\n\t\t}),\r\n\t\tdoFrame: ( options, deltaTime, state, coords) => {\r\n\t\t\tif( !Utils.isPointInArea( coords, options.influence) ) return;\r\n\t\r\n\t\t\tlet dx = coords.x - options.x0;\r\n\t\t\tif( dx ){\r\n\t\t\t\t// time * acceleration\r\n\t\t\t\tstate.vx += deltaTime * ((-1 * options.tension * dx) / state.mass)\r\n\t\t\t}\r\n\t\r\n\t\t\tlet dy = coords.y - options.y0;\r\n\t\t\tif( dy ){\r\n\t\t\t\t// time * acceleration\r\n\t\t\t\tstate.vy += deltaTime * ((-1 * options.tension * dy) / state.mass)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import Behaviors from './Behaviors'\r\n\r\nconst ANIMATOR_PAUSE_CONSECUTIVE_FRAMES = 10;\r\nconst ANIMATOR_PAUSE_ZERO_VELOCITY = 1.0;\r\n\r\nif( typeof requestAnimationFrame === 'undefined' ){\r\n\t// We just don't work without raf (maybe we are in the server)\r\n\t// eslint-disable-next-line no-native-reassign\r\n\trequestAnimationFrame = function(){}\r\n}\r\n\r\nclass PhysicsAnimator {\r\n\tbehaviors = []\r\n\tphysicsObject = {vx: 0, vy: 0, mass: 1}\r\n\tconsecutiveFramesWithNoMovement = 0\r\n\tscreenScale = 1\r\n\tlastFrameTS = 0\r\n\tisRunning = false\r\n\tticking = false\r\n\tisDragging = false\r\n\r\n\tconstructor( View, listener, debug ){\r\n\t\tthis.View = View\r\n\t\tthis.animatorListener = listener\r\n\t\tif( !debug ){\r\n\t\t\tlet nofn = function(){}\r\n\t\t\tthis.debugStart = nofn;\r\n\t\t\tthis.debugEnd = nofn;\r\n\t\t}\r\n\t}\r\n\r\n\tdoFrame( frameTimeMillis ) {\r\n\t\tif( !this.isRunning ) return;\r\n\r\n\t\tif ( this.lastFrameTS ) {\r\n\t\t\tthis.animateFrameWithDeltaTime(\r\n\t\t\t\t(frameTimeMillis - this.lastFrameTS) * 1e-3\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis.lastFrameTS = frameTimeMillis;\r\n\t\tthis.animatorListener.onAnimationFrame();\r\n\t\trequestAnimationFrame( () => this.doFrame( Date.now() ) )\r\n\t}\r\n\r\n\tdebugStart( behavior ){\r\n\t\tif( this.debug !== true && this.debug !== behavior.type ) return;\r\n\t\tthis.debugB = behavior\r\n\t\tthis.debugInitialV = {...this.physicsObject}\r\n\t}\r\n\r\n\tdebugEnd() {\r\n\t\tif (!this.debugB || (this.debug !== true && this.debug !== this.debugB.type)) return;\r\n\t\tconsole.log( `Debug ${this.debugB.type}`, {\r\n\t\t\tdvx: this.physicsObject.vx - this.debugInitialV.vx,\r\n\t\t\tdvy: this.physicsObject.vy - this.debugInitialV.vy,\r\n\t\t})\r\n\t}\r\n\t\r\n\tanimateFrameWithDeltaTime( deltaTime ) {\r\n\t\tif( !deltaTime ) return;\r\n\r\n\t\tlet { physicsObject, behaviors, View } = this\r\n\t\tlet hadMovement = false\r\n\t\tlet coords = View.getTranslation()\r\n\r\n\t\tbehaviors.forEach( behavior => {\r\n\t\t\tthis.debugStart( behavior )\r\n\t\t\tBehaviors[ behavior.type ].doFrame( behavior, deltaTime, physicsObject, coords, View )\r\n\t\t\tthis.debugEnd()\r\n\t\t})\r\n\r\n\t\tlet dx = 0;\r\n\t\tlet {vx,vy} = physicsObject\r\n\t\t\r\n\t\tif ( Math.abs(vx) > ANIMATOR_PAUSE_ZERO_VELOCITY ) {\r\n\t\t\tdx = deltaTime * vx;\r\n\t\t\thadMovement = true;\r\n\t\t}\r\n\r\n\t\tlet dy = 0;\r\n\t\tif ( Math.abs(vy) > ANIMATOR_PAUSE_ZERO_VELOCITY ) {\r\n\t\t\tdy = deltaTime * vy;\r\n\t\t\thadMovement = true;\r\n\t\t}\r\n\t\t\r\n\t\tView.animate( dx, dy )\r\n\r\n\t\tlet cfwnm = hadMovement ? 0 : this.consecutiveFramesWithNoMovement + 1\r\n\t\tthis.consecutiveFramesWithNoMovement = cfwnm\r\n\r\n\t\tif (cfwnm >= ANIMATOR_PAUSE_CONSECUTIVE_FRAMES && !this.isDragging ) {\r\n\t\t\tthis.stopRunning();\r\n\t\t\tthis.animatorListener.onAnimatorPause();\r\n\t\t}\r\n\t}\r\n\r\n\taddBehavior( type, options, isTemp ){\r\n\t\tlet b = Behaviors[ type ]\r\n\t\tif( !b ) return;\r\n\r\n\t\tlet behavior = b.create( options, isTemp )\r\n\t\tlet behaviors = this.behaviors\r\n\t\tlet idx = 0\r\n\r\n\t\twhile (behaviors.length > idx && behaviors[idx].priority <= behavior.priority) {\r\n\t\t\t++idx;\r\n\t\t}\r\n\t\tbehaviors.splice( idx, 0, behavior )\r\n\r\n\t\tthis.ensureRunning()\r\n\t\treturn behavior\r\n\t}\r\n\r\n\tremove( condition ){\r\n\t\tlet behaviors = this.behaviors\r\n\t\tlet i = behaviors.length\r\n\t\twhile( i-- > 0 ){\r\n\t\t\tif( condition(behaviors[i]) ){\r\n\t\t\t\tbehaviors.splice( i, 1 )\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveBehavior( behavior ) {\r\n\t\tthis.remove( target => target === behavior )\r\n\t}\r\n\r\n\tremoveTypeBehaviors( type ){\r\n\t\tthis.remove( target => target.type === type )\r\n\t}\r\n\t\r\n\tremoveTempBehaviors(){\r\n\t\tthis.remove( target => target.isTemp )\r\n\t}\r\n\t\r\n\tgetVelocity(){ \r\n\t\treturn { x: this.physicsObject.vx, y: this.physicsObject.vy }\r\n\t}\r\n\r\n\tensureRunning() {\r\n\t\tthis.isRunning || this.startRunning()\r\n\t}\r\n\r\n\tstartRunning() {\r\n\t\tthis.isRunning = true;\r\n\t\tthis.lastFrameTS = 0;\r\n\t\tthis.consecutiveFramesWithNoMovement = 0;\r\n\t\trequestAnimationFrame( () => this.doFrame( Date.now() ) )\r\n\t}\r\n\r\n\tstopRunning() {\r\n\t\tthis.removeTempBehaviors();\r\n\t\tthis.physicsObject = {vx: 0, vy: 0, mass: this.physicsObject.mass}\r\n\t\tthis.isRunning = false;\r\n\t}\r\n}\r\n\r\nexport default PhysicsAnimator","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Animator from './Animator'\r\nimport Utils from './Utils';\r\n\r\nconst propBehaviors = {\r\n\tfrictionAreas: 'friction',\r\n\tgravityPoints: 'gravity',\r\n\tspringPoints: 'spring',\r\n}\r\n\r\nconst isWeb = typeof document !== 'undefined'\r\n\r\nexport default function injectDependencies( Animated, PanResponder ){\r\n\r\n\treturn class InteractableView extends Component {\r\n\t\tstatic propTypes = {\r\n\t\t\tsnapPoints: PropTypes.array,\r\n\t\t\tfrictionAreas: PropTypes.array,\r\n\t\t\talertAreas: PropTypes.array,\r\n\t\t\tgravityPoints: PropTypes.array,\r\n\t\t\thorizontalOnly: PropTypes.bool,\r\n\t\t\tverticalOnly: PropTypes.bool,\r\n\t\t\tdragWithSpring: PropTypes.object,\r\n\t\t\tdragEnabled: PropTypes.bool,\r\n\t\t\tanimatedValueX: PropTypes.instanceOf(Animated.Value),\r\n\t\t\tanimatedValueY: PropTypes.instanceOf(Animated.Value),\r\n\t\t\tonSnap: PropTypes.func,\r\n\t\t\tonSnapStart: PropTypes.func,\r\n\t\t\tonEnd: PropTypes.func,\r\n\t\t\tonDrag: PropTypes.func,\r\n\t\t\tboundaries: PropTypes.object,\r\n\t\t\tinitialPosition: PropTypes.object,\r\n\t\t\tdragToss: PropTypes.number\r\n\t\t}\r\n\r\n\t\tstatic defaultProps = {\r\n\t\t\tsnapPoints: [],\r\n\t\t\tfrictionAreas: [],\r\n\t\t\talertAreas: [],\r\n\t\t\tgravityPoints: [],\r\n\t\t\tboundaries: {},\r\n\t\t\tinitialPosition: {x: 0, y: 0},\r\n\t\t\tdragToss: .1,\r\n\t\t\tdragEnabled: true,\r\n\t\t\tonSnap: function () { },\r\n\t\t\tonSnapStart: function () { },\r\n\t\t\tonStop: function () { },\r\n\t\t\tonDrag: function () { },\r\n\t\t\tonAlert: function () { },\r\n\t\t\tstyle: {}\r\n\t\t}\r\n\r\n\t\tinitialPositionSet = false\r\n\t\tisDragging = false\r\n\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tlet { x=0, y=0 } = props.initialPosition\r\n\r\n\t\t\t// In case animatedValueXY is not given\r\n\t\t\tthis.animated = new Animated.ValueXY({x, y})\r\n\r\n\t\t\t// This guy will apply all the physics\r\n\t\t\tthis.animator = this.createAnimator( props )\r\n\r\n\t\t\t// Cache when the view is inside of an alert area\r\n\t\t\tthis.insideAlertAreas = {}\r\n\r\n\t\t\t// cache calculated areas\r\n\t\t\tthis.propAreas = {\r\n\t\t\t\talert: [],\r\n\t\t\t\tboundaries: false\r\n\t\t\t}\r\n\r\n\t\t\tthis._pr = this.createPanResponder(props)\r\n\t\t\t\r\n\t\t\t// Set behaviors and prop defaults\r\n\t\t\tthis.setPropBehaviours( {}, props )\r\n\r\n\t\t\t// Set initial position\r\n\t\t\tlet animated  = this.getAnimated( props )\r\n\t\t\tanimated.x.setValue( x )\r\n\t\t\tanimated.y.setValue(y)\r\n\t\t\tanimated.x._startingValue = x\r\n\t\t\tanimated.y._startingValue = y\r\n\t\t\t\r\n\t\t\t// Save the last animation end position to report good coordinates in the events\r\n\t\t\tthis.lastEnd = {...this.initialPosition}\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tlet { x, y } = this.getAnimated()\r\n\t\t\tlet style = this.props.style\r\n\t\t\tlet withPosition = {\r\n\t\t\t\ttransform: [{ translateX: x }, { translateY: y }].concat( style.transform || [] ),\r\n\t\t\t\t...style\r\n\t\t\t}\r\n\r\n\t\t\tlet panHandlers = this.props.dragEnabled ? this._pr.panHandlers : {}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Animated.View style={withPosition} {...panHandlers}>\r\n\t\t\t\t\t{this.props.children}\r\n\t\t\t\t</Animated.View>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tgetTranslation(){\r\n\t\t\tlet {x, y} = this.getAnimated()\r\n\t\t\treturn {\r\n\t\t\t\tx: x._value + x._offset,\r\n\t\t\t\ty: y._value + y._offset\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetTranslationX( tx ){\r\n\t\t\tlet animated = this.props.animatedValueX || this.animated.x\r\n\t\t\tanimated.setValue( tx - animated._offset )\r\n\t\t}\r\n\r\n\t\tsetTranslationY(ty) {\r\n\t\t\tlet animated = this.props.animatedValueY || this.animated.y\r\n\t\t\tanimated.setValue( ty - animated._offset )\r\n\t\t}\r\n\r\n\t\tsetTranslation( tx, ty ){\r\n\t\t\tthis.setTranslationX( tx )\r\n\t\t\tthis.setTranslationY( ty )\r\n\t\t}\r\n\r\n\t\tcreateAnimator(){\r\n\t\t\treturn new Animator( this, {\r\n\t\t\t\tonAnimatorPause: () => {\r\n\t\t\t\t\tlet { x, y } = this.getTranslation()\r\n\t\t\t\t\tthis.lastEnd = {x: Math.round(x), y: Math.round(y)}\r\n\t\t\t\t\tthis.props.onStop( this.lastEnd )\r\n\t\t\t\t},\r\n\t\t\t\tonAnimationFrame: () => {\r\n\t\t\t\t\tthis.reportAlertEvent( this.getTranslation() )\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfalse // Set true or behavior type to output debug info in the console\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tanimate( dx, dy ){\r\n\t\t\tif(!dx && !dy) return\r\n\t\t\t// let animated = this.getAnimated()\r\n\t\t\t// console.log( dx + animated.x._value + animated.x._offset )\r\n\r\n\t\t\tlet {x,y}  = this.getTranslation()\r\n\t\t\tthis.setTranslation( x + dx, y + dy ) \r\n\t\t}\r\n\r\n\t\tgetAnimated( props ){\r\n\t\t\tlet { animatedValueX, animatedValueY } = (props || this.props)\r\n\r\n\t\t\treturn {\r\n\t\t\t\tx: animatedValueX || this.animated.x ,\r\n\t\t\t\ty: animatedValueY || this.animated.y\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcreatePanResponder() {\r\n\t\t\tlet capturer = this.checkResponderCapture.bind(this)\r\n\t\t\t\r\n\t\t\treturn PanResponder.create({\r\n\t\t\t\tonMoveShouldSetResponderCapture: capturer,\r\n\t\t\t\tonMoveShouldSetPanResponderCapture: capturer,\r\n\r\n\t\t\t\tonPanResponderGrant: (e, {x0, y0}) => {\t\r\n\t\t\t\t\tthis._captured = true;\r\n\t\t\t\t\tthis.startDrag( {x: x0, y: y0} )\r\n\t\t\t\t},\r\n\r\n\t\t\t\tonPanResponderMove: (e, gesture ) => {\r\n\t\t\t\t\tthis.onDragging( gesture )\r\n\t\t\t\t},\r\n\r\n\t\t\t\tonPanResponderRelease: () => {\r\n\t\t\t\t\tthis._captured = false;\r\n\t\t\t\t\tthis.endDrag()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tcheckResponderCapture( e, gesture ){\r\n\t\t\treturn this._captured || Math.abs( gesture.dx ) > 5 || Math.abs( gesture.dy ) > 5;\r\n\t\t}\r\n\r\n\t\treportAlertEvent( position ){\r\n\t\t\tlet inside = this.insideAlertAreas\r\n\t\t\tlet { onAlert } = this.props\r\n\r\n\t\t\tthis.propAreas.alert.forEach( ({ influence, id }) => {\r\n\t\t\t\tif ( !influence || !id ) return;\r\n\r\n\t\t\t\tif ( Utils.isPointInArea( position, influence ) ) {\r\n\t\t\t\t\tif ( !inside[id] ) {\r\n\t\t\t\t\t\tonAlert({id, value:\"enter\"});\r\n\t\t\t\t\t\tinside[id] = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (inside[id]) {\r\n\t\t\t\t\tonAlert({ id, value: \"leave\" });\r\n\t\t\t\t\tinside[id] = 0;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstartDrag( ev ){\r\n\t\t\t// Prepare the animated\r\n\t\t\tlet {x,y} = this.getAnimated()\r\n\t\t\tlet offset = {x: x._value, y: y._value}\r\n\t\t\tx.setOffset( offset.x )\r\n\t\t\ty.setOffset( offset.y )\r\n\t\t\tx.setValue( 0 )\r\n\t\t\ty.setValue( 0 )\r\n\r\n\t\t\t// Save the offset for triggering events with the right coordinates\r\n\t\t\tthis.lastEnd = offset\r\n\t\t\t// console.log( offset )\r\n\r\n\t\t\t// Set boundaries to fast access\r\n\t\t\tthis.dragBoundaries = this.propAreas.boundaries ? this.propAreas.boundaries.influence : {}\r\n\r\n\t\t\t// Prepare the animation\r\n\t\t\tthis.props.onDrag({state: 'start', x: offset.x, y: offset.y})\r\n\t\t\tthis.dragStartLocation = { x: ev.x, y: ev.y }\r\n\t\t\tthis.animator.removeTempBehaviors();\r\n\t\t\tthis.animator.isDragging = true\r\n\t\t\tthis.animator.vx = 0\r\n\t\t\tthis.animator.vy = 0\r\n\t\t\tthis.addTempDragBehavior( this.props.dragWithSpring );\r\n\r\n\t\t\t// Stop text selection\r\n\t\t\tif ( isWeb ) {\r\n\t\t\t\tlet styles = document.body.style\r\n\t\t\t\tthis.userSelectCache = styles.userSelect\r\n\t\t\t\tstyles.userSelect = \"none\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tonDragging({dx, dy}){\r\n\t\t\tif( !this.animator.isDragging ) return false\r\n\t\t\tif( !this.props.dragEnabled ) return this.endDrag()\r\n\r\n\t\t\tlet pos = this.lastEnd\r\n\t\t\tlet x = dx + pos.x\r\n\t\t\tlet y = dy + pos.y\r\n\t\t\t\r\n\t\t\t// console.log( this.dragBoundaries.minPoint )\r\n\r\n\t\t\tlet {minPoint, maxPoint} = this.dragBoundaries\r\n\t\t\tif( !this.props.verticalOnly ){\r\n\t\t\t\tif (minPoint) {\r\n\t\t\t\t\tif (minPoint.x > x) x = minPoint.x\r\n\t\t\t\t\tif (maxPoint.x < x) x = maxPoint.x\r\n\t\t\t\t}\r\n\t\t\t\tthis.dragBehavior.x0 = x\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.props.horizontalOnly) {\r\n\t\t\t\tif (minPoint) {\r\n\t\t\t\t\tif (minPoint.y > y) y = minPoint.y\r\n\t\t\t\t\tif (maxPoint.y < y) y = maxPoint.y\r\n\t\t\t\t}\r\n\t\t\t\tthis.dragBehavior.y0 = y\r\n\t\t\t}\r\n\r\n\t\t\t// console.log( this.dragBehavior )\r\n\t\t}\r\n\r\n\t\tendDrag(){\r\n\t\t\tthis.animator.removeTempBehaviors();\r\n\t\t\tthis.dragBehavior = null;\r\n\t\t\tthis.animator.isDragging = false\r\n\r\n\t\t\tlet { animator, horizontalOnly, verticalOnly, dragWithSprings } = this\r\n\r\n\t\t\tlet velocity = animator.getVelocity();\r\n\t\t\tif (horizontalOnly) velocity.y = 0;\r\n\t\t\tif (verticalOnly) velocity.x = 0;\r\n\t\t\t\r\n\t\t\tlet toss = (dragWithSprings && dragWithSprings.toss) || this.props.dragToss;\r\n\t\t\tlet {x,y} = this.getTranslation()\r\n\t\t\tlet projectedCenter = {\r\n\t\t\t\tx: x + toss * velocity.x,\r\n\t\t\t\ty: y + toss * velocity.y\r\n\t\t\t};\r\n\r\n\t\t\t// console.log( 'pc', projectedCenter, velocity)\r\n\t\t\tlet snapPoint = Utils.findClosest(projectedCenter, this.props.snapPoints);\r\n\t\t\tlet targetSnapPointId = (snapPoint && snapPoint.id) ||Â \"\";\r\n\r\n\t\t\tthis.props.onDrag({ state: 'end', x: x, y: y, targetSnapPointId })\r\n\r\n\t\t\tthis.addTempSnapToPointBehavior(snapPoint);\r\n\t\t\tthis.addTempBoundaries();\r\n\r\n\t\t\tlet animated = this.getAnimated()\r\n\t\t\tanimated.x.flattenOffset()\r\n\t\t\tanimated.y.flattenOffset()\r\n\r\n\t\t\t// Restore text selection\r\n\t\t\tif ( isWeb ) {\r\n\t\t\t\tdocument.body.style.userSelect = this.userSelectCache || ''\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\taddTempDragBehavior( drag ) {\r\n\t\t\tlet pos = this.getTranslation()\r\n\r\n\t\t\tif ( !drag || drag.tension === Infinity ) {\r\n\t\t\t\tthis.dragBehavior = this.animator.addBehavior( 'anchor', pos, true )\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tpos.tension = drag.tension || 300\r\n\t\t\t\tthis.dragBehavior = this.animator.addBehavior( 'spring', pos, true )\r\n\t\t\t\tif( drag.damping ){\r\n\t\t\t\t\tthis.animator.addBehavior('friction', drag, true)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\taddTempSnapToPointBehavior( snapPoint ) {\r\n\t\t\tif (!snapPoint)  return;\r\n\t\t\tlet { snapPoints, onSnap, onSnapStart } = this.props\r\n\r\n\t\t\tlet index = snapPoints.indexOf(snapPoint)\r\n\r\n\t\t\tonSnap({index, id: snapPoint.id});\r\n\t\t\tonSnapStart({index, id: snapPoint.id});\r\n\r\n\t\t\tlet springOptions = {\r\n\t\t\t\tdamping: .7,\r\n\t\t\t\ttension: 300,\r\n\t\t\t\t...snapPoint\r\n\t\t\t}\r\n\r\n\t\t\tthis.addBehavior( 'spring', springOptions, true )\r\n\t\t}\r\n\r\n\t\tsetVelocity( velocity ) {\r\n\t\t\tif ( this.dragBehavior ) return;\r\n\t\t\tthis.animator.physicsObject.vx = velocity.x\r\n\t\t\tthis.animator.physicsObject.vy = velocity.y\r\n\t\t\tthis.endDrag();\r\n\t\t}\r\n\r\n\t\tsnapTo( {index} ) {\r\n\t\t\tlet {snapPoints} = this.props;\r\n\r\n\t\t\tif( !snapPoints || index === undefined || index >= snapPoints.length ) return;\r\n\t\t\t\r\n\t\t\tthis.animator.removeTempBehaviors();\r\n\t\t\tthis.dragBehavior = null;\r\n\t\t\tlet snapPoint = snapPoints[index]\r\n\r\n\t\t\tthis.addTempSnapToPointBehavior(snapPoint);\r\n\t\t\tthis.addTempBoundaries();\r\n\t\t}\r\n\r\n\t\taddTempBoundaries(){\r\n\t\t\tlet boundaries = this.propAreas.boundaries;\r\n\t\t\tif( !boundaries ) return;\r\n\t\t\tthis.animator.addBehavior( 'bounce', boundaries, true );\r\n\t\t}\r\n\r\n\t\tchangePosition( position ) {\r\n\t\t\tif ( this.dragBehavior ) return;\r\n\r\n\t\t\tthis.setTranslation( position.x, position.y )\r\n\t\t\tthis.endDrag();\r\n\t\t}\r\n\r\n\t\tcomponentDidUpdate( prevProps ){\r\n\t\t\tthis.setPropBehaviours( prevProps, this.props )\r\n\t\t}\r\n\r\n\t\tsetPropBehaviours( prevProps, props ){\r\n\t\t\t// spring, gravity, friction\r\n\t\t\tObject.keys( propBehaviors ).forEach( prop => {\r\n\t\t\t\tif( prevProps[ prop ] !== props[ prop ] ){\r\n\t\t\t\t\tthis.animator.removeTypeBehaviors(propBehaviors[prop])\r\n\t\t\t\t\tthis.addTypeBehaviors( propBehaviors[prop], props[ prop ] )\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tif( prevProps.alertAreas !== props.alertAreas ){\r\n\t\t\t\tlet alertAreas = []\r\n\t\t\t\tprops.alertAreas.forEach( area => {\r\n\t\t\t\t\talertAreas.push({\r\n\t\t\t\t\t\tid: area.id,\r\n\t\t\t\t\t\tinfluence: Utils.createArea( area.influenceArea )\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tthis.propAreas.alert = alertAreas\r\n\t\t\t}\r\n\r\n\t\t\tif( prevProps.boundaries !== props.boundaries ){\r\n\t\t\t\tthis.animator.removeBehavior( this.oldBoundariesBehavior )\r\n\t\t\t\tif( props.boundaries ){\r\n\t\t\t\t\tlet bounce = {\r\n\t\t\t\t\t\tbounce: props.boundaries.bounce || 0,\r\n\t\t\t\t\t\tinfluence: Utils.createArea( props.boundaries )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.propAreas.boundaries = bounce\r\n\t\t\t\t\tthis.oldBoundariesBehavior = this.animator.addBehavior( 'bounce', bounce )\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.propAreas.boundaries = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.props.dragEnabled && prevProps.dragEnabled && this.dragBehavior ){\r\n\t\t\t\tthis.endDrag()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\taddTypeBehaviors( type, behaviors, isTemp ){\r\n\t\t\tbehaviors.forEach( b => this.addBehavior( type, b, isTemp )\t)\r\n\t\t}\r\n\r\n\t\taddBehavior( type, behavior, isTemp ){\r\n\t\t\tthis.animator.addBehavior( type, behavior, isTemp )\r\n\t\t\tif( behavior.damping && type !== 'friction' ){\r\n\t\t\t\tlet b = this.animator.addBehavior('friction', behavior, isTemp )\r\n\t\t\t\tif( type === 'gravity' && !behavior.influenceArea ){\r\n\t\t\t\t\tb.influence = Utils.createAreaFromRadius(1.4 * (behavior.falloff || 40), behavior)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport Animated from 'animated/lib/targets/react-dom'\r\n\r\nexport default function AnimatedView(props) {\r\n  let propStyles = props.style || {}\r\n  let style = { position: 'relative', display: 'flex', ...propStyles}\r\n\r\n  return (\r\n    <Animated.div {...props} style={style}>\r\n      {props.children}\r\n    </Animated.div>\r\n  )\r\n}","import Animated from 'animated/lib/targets/react-dom'\r\nimport PanResponder from 'react-panresponder-web'\r\nimport injectDependencies from './InteractableView'\r\nimport AnimatedView from './AnimatedView'\r\n\r\n// Fake the Animated.View component\r\nAnimated.View = AnimatedView\r\n\r\nlet Interactable = injectDependencies( Animated, PanResponder ) \r\nexport default {View: Interactable}"],"names":["createArea","boundaries","minPoint","x","left","undefined","Infinity","y","top","maxPoint","right","bottom","createAreaFromRadius","radius","anchor","isPointInArea","area","findClosest","origin","points","minDistance","closestPoint","forEach","point","distance","getDistance","relative","p","r","dx","Math","abs","dy","sqrt","getDelta","def","value","defaultValue","create","options","isTemp","x0","y0","priority","type","doFrame","deltaTime","state","coords","vx","vy","bounce","influence","target","setTranslationX","setTranslationY","friction","damping","Utils","influenceArea","pow","gravity","strength","falloff","dr","a","exp","mass","ax","ay","spring","tension","ANIMATOR_PAUSE_CONSECUTIVE_FRAMES","ANIMATOR_PAUSE_ZERO_VELOCITY","requestAnimationFrame","PhysicsAnimator","View","listener","debug","animatorListener","nofn","debugStart","debugEnd","frameTimeMillis","isRunning","lastFrameTS","animateFrameWithDeltaTime","onAnimationFrame","Date","now","behavior","debugB","debugInitialV","physicsObject","console","log","dvx","dvy","behaviors","hadMovement","getTranslation","Behaviors","animate","cfwnm","consecutiveFramesWithNoMovement","isDragging","stopRunning","onAnimatorPause","b","idx","length","splice","ensureRunning","condition","i","remove","startRunning","removeTempBehaviors","propBehaviors","frictionAreas","gravityPoints","springPoints","isWeb","document","injectDependencies","Animated","PanResponder","props","initialPosition","animated","ValueXY","animator","createAnimator","insideAlertAreas","propAreas","alert","_pr","createPanResponder","setPropBehaviours","getAnimated","setValue","_startingValue","lastEnd","style","withPosition","transform","translateX","translateY","concat","panHandlers","dragEnabled","React","children","_value","_offset","tx","animatedValueX","ty","animatedValueY","Animator","round","onStop","reportAlertEvent","setTranslation","capturer","checkResponderCapture","bind","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","onPanResponderGrant","e","_captured","startDrag","onPanResponderMove","gesture","onDragging","onPanResponderRelease","endDrag","position","inside","onAlert","id","ev","offset","setOffset","dragBoundaries","onDrag","dragStartLocation","addTempDragBehavior","dragWithSpring","styles","body","userSelectCache","userSelect","pos","verticalOnly","dragBehavior","horizontalOnly","dragWithSprings","velocity","getVelocity","toss","dragToss","projectedCenter","snapPoint","snapPoints","targetSnapPointId","addTempSnapToPointBehavior","addTempBoundaries","flattenOffset","drag","addBehavior","onSnap","onSnapStart","index","indexOf","springOptions","prevProps","Object","keys","prop","removeTypeBehaviors","addTypeBehaviors","alertAreas","push","removeBehavior","oldBoundariesBehavior","Component","PropTypes","array","bool","object","instanceOf","Value","func","onEnd","number","AnimatedView","propStyles","display","Interactable"],"mappings":"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"}