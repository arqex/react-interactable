{"version":3,"file":"interactable.noNative.min.js","sources":["../playground/src/react-interactable/Utils.js","../playground/src/react-interactable/Behaviors.js","../playground/src/react-interactable/Animator.js","../playground/src/react-interactable/InteractableView.js","../playground/src/react-interactable/noNative.js","../playground/src/react-interactable/AnimatedView.js"],"sourcesContent":["export default {\r\n\tcreateArea: function( boundaries ){\r\n\t\treturn {\r\n\t\t\tminPoint: {\r\n\t\t\t\tx: boundaries.left === undefined ? -Infinity : boundaries.left,\r\n\t\t\t\ty: boundaries.top === undefined ? -Infinity : boundaries.top\r\n\t\t\t},\r\n\t\t\tmaxPoint: {\r\n\t\t\t\tx: boundaries.right === undefined ? Infinity : boundaries.right,\r\n\t\t\t\ty: boundaries.bottom === undefined ? Infinity : boundaries.bottom\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreateAreaFromRadius: function( radius, anchor ){\r\n\t\treturn {\r\n\t\t\tminPoint: {x: anchor.x - radius, y: anchor.y - radius},\r\n\t\t\tmaxPoint: {x: anchor.x + radius, y: anchor.y + radius}\r\n\t\t}\r\n\t},\r\n\tisPointInArea: function( {x, y}, area ){\r\n\t\tif( !area ) return true\r\n\r\n\t\tlet { minPoint, maxPoint } = area\r\n\r\n\t\treturn x>=minPoint.x && x <= maxPoint.x && y >= minPoint.y && y <= maxPoint.y\r\n\t},\r\n\tfindClosest: function( origin, points ){\r\n\t\tlet minDistance = Infinity;\r\n\t\tlet closestPoint = null;\r\n\t\tlet distances = []\r\n\t\tpoints.forEach( point => {\r\n\t\t\tlet distance = this.getDistance( point, origin );\r\n\t\t\tdistances.push( distance )\r\n\t\t\tif (distance < minDistance) {\r\n\t\t\t\tminDistance = distance;\r\n\t\t\t\tclosestPoint = point;\r\n\t\t\t}\r\n\t\t})\r\n\t\t// console.log( distances )\r\n\t\treturn closestPoint\r\n\t},\r\n\tgetDistance( point, relative ){\r\n\t\tlet p = {x: point.x === undefined ? Infinity : point.x, y: point.y === undefined ? Infinity : point.y }\r\n\t\tlet r = {x: relative.x === undefined ? Infinity : relative.x, y: relative.y === undefined ? Infinity : relative.y }\r\n\t\tif( p.x === Infinity && p.y === Infinity ) return Infinity\r\n\t\tlet dx = p.x === Infinity ? 0 : Math.abs(r.x - p.x)\r\n\t\tlet dy = p.y === Infinity ? 0 : Math.abs(r.y - p.y)\r\n\t\t\r\n\t\treturn Math.sqrt( dx*dx + dy*dy )\r\n\t},\r\n\tgetDelta( point, origin ){\r\n\t\treturn {\r\n\t\t\tx: point.x - origin.x,\r\n\t\t\ty: point.y - origin.y\r\n\t\t}\r\n\t}\r\n}","import Utils from './Utils'\r\n\r\nfunction def( value, defaultValue ){\r\n\treturn value === undefined ? defaultValue : value\r\n}\r\n\r\nexport default {\r\n\tanchor: {\r\n\t\tcreate: (options, isTemp = false) => (\r\n\t\t\t{ x0: options.x, y0: options.y, priority: 1, isTemp, type: 'anchor' }\r\n\t\t),\r\n\t\tdoFrame: (options, deltaTime, state, coords ) => {\r\n\t\t\t// Velocity = dx / deltaTime\r\n\t\t\tstate.vx = (options.x0 - coords.x) / deltaTime\r\n\t\t\tstate.vy = (options.y0 - coords.y) / deltaTime\r\n\t\t}\r\n\t},\r\n\r\n\tbounce: {\r\n\t\tcreate: (options, isTemp = false) => ({\r\n\t\t\ttype: 'bounce',\r\n\t\t\tbounce: def(options.bounce, .5),\r\n\t\t\tminPoint: options.influence.minPoint,\r\n\t\t\tmaxPoint: options.influence.maxPoint,\r\n\t\t\tpriority: 3,\r\n\t\t\tisTemp\r\n\t\t}),\r\n\t\tdoFrame: ({minPoint, maxPoint, bounce}, deltaTime, state, {x,y}, target ) => {\r\n\t\t\t// Apply limits\r\n\r\n\t\t\tif (minPoint.x > x) target.setTranslationX(minPoint.x);\r\n\t\t\tif (minPoint.y > y) target.setTranslationY(minPoint.y);\r\n\t\t\tif (maxPoint.x < x) target.setTranslationX(maxPoint.x);\r\n\t\t\tif (maxPoint.y < y) target.setTranslationY(maxPoint.y);\r\n\r\n\t\t\tlet { vx, vy } = state\r\n\r\n\t\t\tif (minPoint.x > x && vx < 0) {\r\n\t\t\t\tstate.vx = -vx * bounce\r\n\t\t\t}\r\n\t\t\tif (minPoint.y > y && vy < 0) {\r\n\t\t\t\tstate.vy= -vy * bounce\r\n\t\t\t}\r\n\t\t\tif (maxPoint.x < x && vx > 0) {\r\n\t\t\t\tstate.vx = -vx * bounce\r\n\t\t\t}\r\n\t\t\tif (maxPoint.y < y && vy > 0) {\r\n\t\t\t\tstate.vy = -vy * bounce\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tfriction: {\r\n\t\tcreate: ( options, isTemp = false ) => ({\r\n\t\t\ttype: 'friction',\r\n\t\t\tdamping: def(options.damping, .7),\r\n\t\t\tinfluence: Utils.createArea( options.influenceArea || {} ),\r\n\t\t\tpriority: 2,\r\n\t\t\tisTemp\r\n\t\t}),\r\n\t\tdoFrame: (options, deltaTime, state, coords) => {\r\n\t\t\tif( !Utils.isPointInArea( coords, options.influence) ) return;\r\n\t\t\t\r\n\t\t\tlet pow = Math.pow(options.damping, 60.0 * deltaTime)\r\n\t\t\tstate.vx = pow * state.vx\r\n\t\t\tstate.vy = pow * state.vy\r\n\t\t}\r\n\t},\r\n\r\n\tgravity: {\r\n\t\tcreate: ( options, isTemp = false ) => ({\r\n\t\t\ttype: 'gravity',\r\n\t\t\tx0: def(options.x, Infinity),\r\n\t\t\ty0: def(options.y, Infinity),\r\n\t\t\tstrength: def(options.strength, 400),\r\n\t\t\tfalloff: def(options.falloff, 40),\r\n\t\t\tdamping: def(options.damping, 0),\r\n\t\t\tinfluence: Utils.createArea(options.influenceArea || {}),\r\n\t\t\tisTemp,\r\n\t\t\tpriority: 1\r\n\t\t}),\r\n\t\tdoFrame: (options, deltaTime, state, coords) => {\r\n\t\t\tif( !Utils.isPointInArea( coords, options.influence) ) return;\r\n\r\n\t\t\tlet dx = options.x0 !== Infinity ? coords.x - options.x0 : 0;\r\n\t\t\tlet dy = options.y0 !== Infinity ? coords.y - options.y0 : 0;\r\n\t\t\tlet dr = Math.sqrt(dx * dx + dy * dy);\r\n\r\n\t\t\tif (!dr) return;\r\n\r\n\t\t\tlet { falloff, strength } = options\r\n\t\t\tlet a = (-strength * dr * Math.exp(-0.5 * (dr * dr) / (falloff * falloff))) / state.mass;\r\n\r\n\t\t\tlet ax = dx / dr * a;\r\n\t\t\tlet ay = dy / dr * a;\r\n\r\n\t\t\tstate.vx += deltaTime * ax\r\n\t\t\tstate.vy += deltaTime * ay\r\n\t\t}\r\n\t},\r\n\r\n\tspring: {\r\n\t\tcreate: ( options, isTemp = false ) => ({\r\n\t\t\ttype: 'spring',\r\n\t\t\tx0: def(options.x, 0),\r\n\t\t\ty0: def(options.y, 0),\r\n\t\t\ttension: def(options.tension, 300),\r\n\t\t\tinfluence: Utils.createArea( options.influenceArea || {} ),\r\n\t\t\tisTemp,\r\n\t\t\tpriority: 1\r\n\t\t}),\r\n\t\tdoFrame: ( options, deltaTime, state, coords) => {\r\n\t\t\tif( !Utils.isPointInArea( coords, options.influence) ) return;\r\n\t\r\n\t\t\tlet dx = coords.x - options.x0;\r\n\t\t\tif( dx ){\r\n\t\t\t\t// time * acceleration\r\n\t\t\t\tstate.vx += deltaTime * ((-1 * options.tension * dx) / state.mass)\r\n\t\t\t}\r\n\t\r\n\t\t\tlet dy = coords.y - options.y0;\r\n\t\t\tif( dy ){\r\n\t\t\t\t// time * acceleration\r\n\t\t\t\tstate.vy += deltaTime * ((-1 * options.tension * dy) / state.mass)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import Behaviors from './Behaviors'\r\n\r\nconst ANIMATOR_PAUSE_CONSECUTIVE_FRAMES = 10;\r\nconst ANIMATOR_PAUSE_ZERO_VELOCITY = 1.0;\r\n\r\nif( typeof requestAnimationFrame === 'undefined' ){\r\n\t// We just don't work without raf (maybe we are in the server)\r\n\t// eslint-disable-next-line no-native-reassign\r\n\trequestAnimationFrame = function(){}\r\n}\r\n\r\nclass PhysicsAnimator {\r\n\tbehaviors = []\r\n\tphysicsObject = {vx: 0, vy: 0, mass: 1}\r\n\tconsecutiveFramesWithNoMovement = 0\r\n\tscreenScale = 1\r\n\tlastFrameTS = 0\r\n\tisRunning = false\r\n\tticking = false\r\n\tisDragging = false\r\n\r\n\tconstructor( View, listener, debug ){\r\n\t\tthis.View = View\r\n\t\tthis.animatorListener = listener\r\n\t\tif( !debug ){\r\n\t\t\tlet nofn = function(){}\r\n\t\t\tthis.debugStart = nofn;\r\n\t\t\tthis.debugEnd = nofn;\r\n\t\t}\r\n\t}\r\n\r\n\tdoFrame( frameTimeMillis ) {\r\n\t\tif( !this.isRunning ) return;\r\n\r\n\t\tif ( this.lastFrameTS ) {\r\n\t\t\tthis.animateFrameWithDeltaTime(\r\n\t\t\t\t(frameTimeMillis - this.lastFrameTS) * 1e-3\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis.lastFrameTS = frameTimeMillis;\r\n\t\tthis.animatorListener.onAnimationFrame();\r\n\t\trequestAnimationFrame( () => this.doFrame( Date.now() ) )\r\n\t}\r\n\r\n\tdebugStart( behavior ){\r\n\t\tif( this.debug !== true && this.debug !== behavior.type ) return;\r\n\t\tthis.debugB = behavior\r\n\t\tthis.debugInitialV = {...this.physicsObject}\r\n\t}\r\n\r\n\tdebugEnd() {\r\n\t\tif (!this.debugB || (this.debug !== true && this.debug !== this.debugB.type)) return;\r\n\t\tconsole.log( `Debug ${this.debugB.type}`, {\r\n\t\t\tdvx: this.physicsObject.vx - this.debugInitialV.vx,\r\n\t\t\tdvy: this.physicsObject.vy - this.debugInitialV.vy,\r\n\t\t})\r\n\t}\r\n\t\r\n\tanimateFrameWithDeltaTime( deltaTime ) {\r\n\t\tif( !deltaTime ) return;\r\n\r\n\t\tlet { physicsObject, behaviors, View } = this\r\n\t\tlet hadMovement = false\r\n\t\tlet coords = View.getTranslation()\r\n\r\n\t\tbehaviors.forEach( behavior => {\r\n\t\t\tthis.debugStart( behavior )\r\n\t\t\tBehaviors[ behavior.type ].doFrame( behavior, deltaTime, physicsObject, coords, View )\r\n\t\t\tthis.debugEnd()\r\n\t\t})\r\n\r\n\t\tlet dx = 0;\r\n\t\tlet {vx,vy} = physicsObject\r\n\t\t\r\n\t\tif ( Math.abs(vx) > ANIMATOR_PAUSE_ZERO_VELOCITY ) {\r\n\t\t\tdx = deltaTime * vx;\r\n\t\t\thadMovement = true;\r\n\t\t}\r\n\r\n\t\tlet dy = 0;\r\n\t\tif ( Math.abs(vy) > ANIMATOR_PAUSE_ZERO_VELOCITY ) {\r\n\t\t\tdy = deltaTime * vy;\r\n\t\t\thadMovement = true;\r\n\t\t}\r\n\t\t\r\n\t\tView.animate( dx, dy )\r\n\r\n\t\tlet cfwnm = hadMovement ? 0 : this.consecutiveFramesWithNoMovement + 1\r\n\t\tthis.consecutiveFramesWithNoMovement = cfwnm\r\n\r\n\t\tif (cfwnm >= ANIMATOR_PAUSE_CONSECUTIVE_FRAMES && !this.isDragging ) {\r\n\t\t\tthis.stopRunning();\r\n\t\t\tthis.animatorListener.onAnimatorPause();\r\n\t\t}\r\n\t}\r\n\r\n\taddBehavior( type, options, isTemp ){\r\n\t\tlet b = Behaviors[ type ]\r\n\t\tif( !b ) return;\r\n\r\n\t\tlet behavior = b.create( options, isTemp )\r\n\t\tlet behaviors = this.behaviors\r\n\t\tlet idx = 0\r\n\r\n\t\twhile (behaviors.length > idx && behaviors[idx].priority <= behavior.priority) {\r\n\t\t\t++idx;\r\n\t\t}\r\n\t\tbehaviors.splice( idx, 0, behavior )\r\n\r\n\t\tthis.ensureRunning()\r\n\t\treturn behavior\r\n\t}\r\n\r\n\tremove( condition ){\r\n\t\tlet behaviors = this.behaviors\r\n\t\tlet i = behaviors.length\r\n\t\twhile( i-- > 0 ){\r\n\t\t\tif( condition(behaviors[i]) ){\r\n\t\t\t\tbehaviors.splice( i, 1 )\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveBehavior( behavior ) {\r\n\t\tthis.remove( target => target === behavior )\r\n\t}\r\n\r\n\tremoveTypeBehaviors( type ){\r\n\t\tthis.remove( target => target.type === type )\r\n\t}\r\n\t\r\n\tremoveTempBehaviors(){\r\n\t\tthis.remove( target => target.isTemp )\r\n\t}\r\n\t\r\n\tgetVelocity(){ \r\n\t\treturn { x: this.physicsObject.vx, y: this.physicsObject.vy }\r\n\t}\r\n\r\n\tensureRunning() {\r\n\t\tthis.isRunning || this.startRunning()\r\n\t}\r\n\r\n\tstartRunning() {\r\n\t\tthis.isRunning = true;\r\n\t\tthis.lastFrameTS = 0;\r\n\t\tthis.consecutiveFramesWithNoMovement = 0;\r\n\t\trequestAnimationFrame( () => this.doFrame( Date.now() ) )\r\n\t}\r\n\r\n\tstopRunning() {\r\n\t\tthis.removeTempBehaviors();\r\n\t\tthis.physicsObject = {vx: 0, vy: 0, mass: this.physicsObject.mass}\r\n\t\tthis.isRunning = false;\r\n\t}\r\n}\r\n\r\nexport default PhysicsAnimator","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Animator from './Animator'\nimport Utils from './Utils';\n\nconst propBehaviors = {\n\tfrictionAreas: 'friction',\n\tgravityPoints: 'gravity',\n\tspringPoints: 'spring',\n}\n\nconst isWeb = typeof document !== 'undefined'\n\nexport default function injectDependencies( Animated, PanResponder ){\n\n\treturn class InteractableView extends Component {\n\t\tstatic propTypes = {\n\t\t\tsnapPoints: PropTypes.array,\n\t\t\tfrictionAreas: PropTypes.array,\n\t\t\talertAreas: PropTypes.array,\n\t\t\tgravityPoints: PropTypes.array,\n\t\t\thorizontalOnly: PropTypes.bool,\n\t\t\tverticalOnly: PropTypes.bool,\n\t\t\tdragWithSpring: PropTypes.object,\n\t\t\tdragEnabled: PropTypes.bool,\n\t\t\tanimatedValueX: PropTypes.instanceOf(Animated.Value),\n\t\t\tanimatedValueY: PropTypes.instanceOf(Animated.Value),\n\t\t\tonSnap: PropTypes.func,\n\t\t\tonSnapStart: PropTypes.func,\n\t\t\tonEnd: PropTypes.func,\n\t\t\tonDrag: PropTypes.func,\n\t\t\tboundaries: PropTypes.object,\n\t\t\tinitialPosition: PropTypes.object,\n\t\t\tdragToss: PropTypes.number\n\t\t}\n\n\t\tstatic defaultProps = {\n\t\t\tsnapPoints: [],\n\t\t\tfrictionAreas: [],\n\t\t\talertAreas: [],\n\t\t\tgravityPoints: [],\n\t\t\tboundaries: {},\n\t\t\tinitialPosition: {x: 0, y: 0},\n\t\t\tdragToss: .1,\n\t\t\tdragEnabled: true,\n\t\t\tonSnap: function () { },\n\t\t\tonSnapStart: function () { },\n\t\t\tonStop: function () { },\n\t\t\tonDrag: function () { },\n\t\t\tonAlert: function () { },\n\t\t\tstyle: {}\n\t\t}\n\n\t\tinitialPositionSet = false\n\t\tisDragging = false\n\n\t\tconstructor(props) {\n\t\t\tsuper(props)\n\n\t\t\tlet { x=0, y=0 } = props.initialPosition\n\n\t\t\t// In case animatedValueXY is not given\n\t\t\tthis.animated = new Animated.ValueXY({x, y})\n\n\t\t\t// This guy will apply all the physics\n\t\t\tthis.animator = this.createAnimator( props )\n\n\t\t\t// Cache when the view is inside of an alert area\n\t\t\tthis.insideAlertAreas = {}\n\n\t\t\t// cache calculated areas\n\t\t\tthis.propAreas = {\n\t\t\t\talert: [],\n\t\t\t\tboundaries: false\n\t\t\t}\n\n\t\t\tthis._pr = this.createPanResponder(props)\n\t\t\t\n\t\t\t// Set behaviors and prop defaults\n\t\t\tthis.setPropBehaviours( {}, props )\n\n\t\t\t// Set initial position\n\t\t\tlet animated  = this.getAnimated( props )\n\t\t\tanimated.x.setValue( x )\n\t\t\tanimated.y.setValue(y)\n\t\t\tanimated.x._startingValue = x\n\t\t\tanimated.y._startingValue = y\n\t\t\t\n\t\t\t// Save the last animation end position to report good coordinates in the events\n\t\t\tthis.lastEnd = {...this.initialPosition}\n\t\t}\n\n\t\trender() {\n\t\t\tlet { x, y } = this.getAnimated()\n\t\t\tlet style = this.props.style\n\t\t\tlet withPosition = {\n\t\t\t\ttransform: [{ translateX: x }, { translateY: y }].concat( style.transform || [] ),\n\t\t\t\t...style\n\t\t\t}\n\n\t\t\tlet panHandlers = this.props.dragEnabled ? this._pr.panHandlers : {}\n\n\t\t\treturn (\n\t\t\t\t<Animated.View style={withPosition} {...panHandlers}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</Animated.View>\n\t\t\t)\n\t\t}\n\n\t\tgetTranslation(){\n\t\t\tlet {x, y} = this.getAnimated()\n\t\t\treturn {\n\t\t\t\tx: x._value + x._offset,\n\t\t\t\ty: y._value + y._offset\n\t\t\t}\n\t\t}\n\n\t\tsetTranslationX( tx ){\n\t\t\tlet animated = this.props.animatedValueX || this.animated.x\n\t\t\tanimated.setValue( tx - animated._offset )\n\t\t}\n\n\t\tsetTranslationY(ty) {\n\t\t\tlet animated = this.props.animatedValueY || this.animated.y\n\t\t\tanimated.setValue( ty - animated._offset )\n\t\t}\n\n\t\tsetTranslation( tx, ty ){\n\t\t\tthis.setTranslationX( tx )\n\t\t\tthis.setTranslationY( ty )\n\t\t}\n\n\t\tcreateAnimator(){\n\t\t\treturn new Animator( this, {\n\t\t\t\tonAnimatorPause: () => {\n\t\t\t\t\tlet { x, y } = this.getTranslation()\n\t\t\t\t\tthis.lastEnd = {x: Math.round(x), y: Math.round(y)}\n\t\t\t\t\tthis.props.onStop( this.lastEnd )\n\t\t\t\t},\n\t\t\t\tonAnimationFrame: () => {\n\t\t\t\t\tthis.reportAlertEvent( this.getTranslation() )\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse // Set true or behavior type to output debug info in the console\n\t\t\t)\n\t\t}\n\n\t\tanimate( dx, dy ){\n\t\t\tif(!dx && !dy) return\n\t\t\t// let animated = this.getAnimated()\n\t\t\t// console.log( dx + animated.x._value + animated.x._offset )\n\n\t\t\tlet {x,y}  = this.getTranslation()\n\t\t\tthis.setTranslation( x + dx, y + dy ) \n\t\t}\n\n\t\tgetAnimated( props ){\n\t\t\tlet { animatedValueX, animatedValueY } = (props || this.props)\n\n\t\t\treturn {\n\t\t\t\tx: animatedValueX || this.animated.x ,\n\t\t\t\ty: animatedValueY || this.animated.y\n\t\t\t}\n\t\t}\n\n\t\tcreatePanResponder() {\n\t\t\tlet capturer = this.checkResponderCapture.bind(this)\n\t\t\t\n\t\t\treturn PanResponder.create({\n\t\t\t\tonMoveShouldSetResponderCapture: capturer,\n\t\t\t\tonMoveShouldSetPanResponderCapture: capturer,\n\n\t\t\t\tonPanResponderGrant: (e, {x0, y0}) => {\t\n\t\t\t\t\tthis._captured = true;\n\t\t\t\t\tthis.startDrag( {x: x0, y: y0} )\n\t\t\t\t},\n\n\t\t\t\tonPanResponderMove: (e, gesture ) => {\n\t\t\t\t\tthis.onDragging( gesture )\n\t\t\t\t},\n\n\t\t\t\tonPanResponderRelease: () => {\n\t\t\t\t\tthis._captured = false;\n\t\t\t\t\tthis.endDrag()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tcheckResponderCapture( e, gesture ){\n\t\t\treturn this._captured || Math.abs( gesture.dx ) > 5 || Math.abs( gesture.dy ) > 5;\n\t\t}\n\n\t\treportAlertEvent( position ){\n\t\t\tlet inside = this.insideAlertAreas\n\t\t\tlet { onAlert } = this.props\n\n\t\t\tthis.propAreas.alert.forEach( ({ influence, id }) => {\n\t\t\t\tif ( !influence || !id ) return;\n\n\t\t\t\tif ( Utils.isPointInArea( position, influence ) ) {\n\t\t\t\t\tif ( !inside[id] ) {\n\t\t\t\t\t\tonAlert({id, value:\"enter\"});\n\t\t\t\t\t\tinside[id] = 1;\n\t\t\t\t\t}\n\t\t\t\t} else if (inside[id]) {\n\t\t\t\t\tonAlert({ id, value: \"leave\" });\n\t\t\t\t\tinside[id] = 0;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tstartDrag( ev ){\n\t\t\t// Prepare the animated\n\t\t\tlet {x,y} = this.getAnimated()\n\t\t\tlet offset = {x: x._value, y: y._value}\n\t\t\tx.setOffset( offset.x )\n\t\t\ty.setOffset( offset.y )\n\t\t\tx.setValue( 0 )\n\t\t\ty.setValue( 0 )\n\n\t\t\t// Save the offset for triggering events with the right coordinates\n\t\t\tthis.lastEnd = offset\n\t\t\t// console.log( offset )\n\n\t\t\t// Set boundaries to fast access\n\t\t\tthis.dragBoundaries = this.propAreas.boundaries ? this.propAreas.boundaries.influence : {}\n\n\t\t\t// Prepare the animation\n\t\t\tthis.props.onDrag({state: 'start', x: offset.x, y: offset.y})\n\t\t\tthis.dragStartLocation = { x: ev.x, y: ev.y }\n\t\t\tthis.animator.removeTempBehaviors();\n\t\t\tthis.animator.isDragging = true\n\t\t\tthis.animator.vx = 0\n\t\t\tthis.animator.vy = 0\n\t\t\tthis.addTempDragBehavior( this.props.dragWithSpring );\n\n\t\t\t// Stop text selection\n\t\t\tif ( isWeb ) {\n\t\t\t\tlet styles = document.body.style\n\t\t\t\tthis.userSelectCache = styles.userSelect\n\t\t\t\tstyles.userSelect = \"none\"\n\t\t\t}\n\t\t}\n\n\t\tonDragging({dx, dy}){\n\t\t\tif( !this.animator.isDragging ) return false\n\t\t\tif( !this.props.dragEnabled ) return this.endDrag()\n\n\t\t\tlet pos = this.lastEnd\n\t\t\tlet x = dx + pos.x\n\t\t\tlet y = dy + pos.y\n\t\t\t\n\t\t\t// console.log( this.dragBoundaries.minPoint )\n\n\t\t\tlet {minPoint, maxPoint} = this.dragBoundaries\n\t\t\tif( !this.props.verticalOnly ){\n\t\t\t\tif (minPoint) {\n\t\t\t\t\tif (minPoint.x > x) x = minPoint.x\n\t\t\t\t\tif (maxPoint.x < x) x = maxPoint.x\n\t\t\t\t}\n\t\t\t\tthis.dragBehavior.x0 = x\n\t\t\t}\n\n\t\t\tif (!this.props.horizontalOnly) {\n\t\t\t\tif (minPoint) {\n\t\t\t\t\tif (minPoint.y > y) y = minPoint.y\n\t\t\t\t\tif (maxPoint.y < y) y = maxPoint.y\n\t\t\t\t}\n\t\t\t\tthis.dragBehavior.y0 = y\n\t\t\t}\n\n\t\t\t// console.log( this.dragBehavior )\n\t\t}\n\n\t\tendDrag(){\n\t\t\tthis.animator.removeTempBehaviors();\n\t\t\tthis.dragBehavior = null;\n\t\t\tthis.animator.isDragging = false\n\n\t\t\tlet { animator, horizontalOnly, verticalOnly, dragWithSprings } = this\n\n\t\t\tlet velocity = animator.getVelocity();\n\t\t\tif (horizontalOnly) velocity.y = 0;\n\t\t\tif (verticalOnly) velocity.x = 0;\n\t\t\t\n\t\t\tlet toss = (dragWithSprings && dragWithSprings.toss) || this.props.dragToss;\n\t\t\tlet {x,y} = this.getTranslation()\n\t\t\tlet projectedCenter = {\n\t\t\t\tx: x + toss * velocity.x,\n\t\t\t\ty: y + toss * velocity.y\n\t\t\t};\n\n\t\t\t// console.log( 'pc', projectedCenter, velocity)\n\t\t\tlet snapPoint = Utils.findClosest(projectedCenter, this.props.snapPoints);\n\t\t\tlet targetSnapPointId = (snapPoint && snapPoint.id) || \"\";\n\n\t\t\tthis.props.onDrag({ state: 'end', x: x, y: y, targetSnapPointId })\n\n\t\t\tthis.addTempSnapToPointBehavior(snapPoint);\n\t\t\tthis.addTempBoundaries();\n\n\t\t\tlet animated = this.getAnimated()\n\t\t\tanimated.x.flattenOffset()\n\t\t\tanimated.y.flattenOffset()\n\n\t\t\t// Restore text selection\n\t\t\tif ( isWeb ) {\n\t\t\t\tdocument.body.userSelect = this.userSelectCache || ''\n\t\t\t}\n\t\t}\n\n\t\taddTempDragBehavior( drag ) {\n\t\t\tlet pos = this.getTranslation()\n\n\t\t\tif ( !drag || drag.tension === Infinity ) {\n\t\t\t\tthis.dragBehavior = this.animator.addBehavior( 'anchor', pos, true )\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpos.tension = drag.tension || 300\n\t\t\t\tthis.dragBehavior = this.animator.addBehavior( 'spring', pos, true )\n\t\t\t\tif( drag.damping ){\n\t\t\t\t\tthis.animator.addBehavior('friction', drag, true)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\taddTempSnapToPointBehavior( snapPoint ) {\n\t\t\tif (!snapPoint)  return;\n\t\t\tlet { snapPoints, onSnap, onSnapStart } = this.props\n\n\t\t\tlet index = snapPoints.indexOf(snapPoint)\n\n\t\t\tonSnap({index, id: snapPoint.id});\n\t\t\tonSnapStart({index, id: snapPoint.id});\n\n\t\t\tlet springOptions = {\n\t\t\t\tdamping: .7,\n\t\t\t\ttension: 300,\n\t\t\t\t...snapPoint\n\t\t\t}\n\n\t\t\tthis.addBehavior( 'spring', springOptions, true )\n\t\t}\n\n\t\tsetVelocity( velocity ) {\n\t\t\tif ( this.dragBehavior ) return;\n\t\t\tthis.animator.physicsObject.vx = velocity.x\n\t\t\tthis.animator.physicsObject.vy = velocity.y\n\t\t\tthis.endDrag();\n\t\t}\n\n\t\tsnapTo( {index} ) {\n\t\t\tlet {snapPoints} = this.props;\n\n\t\t\tif( !snapPoints || index === undefined || index >= snapPoints.length ) return;\n\t\t\t\n\t\t\tthis.animator.removeTempBehaviors();\n\t\t\tthis.dragBehavior = null;\n\t\t\tlet snapPoint = snapPoints[index]\n\n\t\t\tthis.addTempSnapToPointBehavior(snapPoint);\n\t\t\tthis.addTempBoundaries();\n\t\t}\n\n\t\taddTempBoundaries(){\n\t\t\tlet boundaries = this.propAreas.boundaries;\n\t\t\tif( !boundaries ) return;\n\t\t\tthis.animator.addBehavior( 'bounce', boundaries, true );\n\t\t}\n\n\t\tchangePosition( position ) {\n\t\t\tif ( this.dragBehavior ) return;\n\n\t\t\tthis.setTranslation( position.x, position.y )\n\t\t\tthis.endDrag();\n\t\t}\n\n\t\tcomponentDidUpdate( prevProps ){\n\t\t\tthis.setPropBehaviours( prevProps, this.props )\n\t\t}\n\n\t\tsetPropBehaviours( prevProps, props ){\n\t\t\t// spring, gravity, friction\n\t\t\tObject.keys( propBehaviors ).forEach( prop => {\n\t\t\t\tif( prevProps[ prop ] !== props[ prop ] ){\n\t\t\t\t\tthis.animator.removeTypeBehaviors(propBehaviors[prop])\n\t\t\t\t\tthis.addTypeBehaviors( propBehaviors[prop], props[ prop ] )\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif( prevProps.alertAreas !== props.alertAreas ){\n\t\t\t\tlet alertAreas = []\n\t\t\t\tprops.alertAreas.forEach( area => {\n\t\t\t\t\talertAreas.push({\n\t\t\t\t\t\tid: area.id,\n\t\t\t\t\t\tinfluence: Utils.createArea( area.influenceArea )\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tthis.propAreas.alert = alertAreas\n\t\t\t}\n\n\t\t\tif( prevProps.boundaries !== props.boundaries ){\n\t\t\t\tthis.animator.removeBehavior( this.oldBoundariesBehavior )\n\t\t\t\tif( props.boundaries ){\n\t\t\t\t\tlet bounce = {\n\t\t\t\t\t\tbounce: props.boundaries.bounce || 0,\n\t\t\t\t\t\tinfluence: Utils.createArea( props.boundaries )\n\t\t\t\t\t}\n\t\t\t\t\tthis.propAreas.boundaries = bounce\n\t\t\t\t\tthis.oldBoundariesBehavior = this.animator.addBehavior( 'bounce', bounce )\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.propAreas.boundaries = false\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (!this.props.dragEnabled && prevProps.dragEnabled && this.dragBehavior ){\n\t\t\t\tthis.endDrag()\n\t\t\t}\n\t\t}\n\n\t\taddTypeBehaviors( type, behaviors, isTemp ){\n\t\t\tbehaviors.forEach( b => this.addBehavior( type, b, isTemp )\t)\n\t\t}\n\n\t\taddBehavior( type, behavior, isTemp ){\n\t\t\tthis.animator.addBehavior( type, behavior, isTemp )\n\t\t\tif( behavior.damping && type !== 'friction' ){\n\t\t\t\tlet b = this.animator.addBehavior('friction', behavior, isTemp )\n\t\t\t\tif( type === 'gravity' && !behavior.influenceArea ){\n\t\t\t\t\tb.influence = Utils.createAreaFromRadius(1.4 * (behavior.falloff || 40), behavior)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import Animated from 'animated/lib/targets/react-dom'\nimport PanResponder from 'react-panresponder-web'\nimport injectDependencies from './InteractableView'\nimport AnimatedView from './AnimatedView'\n\n// Fake the Animated.View component\nAnimated.View = AnimatedView\n\nlet Interactable = injectDependencies( Animated, PanResponder ) \nexport default {View: Interactable}","import React from 'react'\r\nimport Animated from 'animated/lib/targets/react-dom'\r\n\r\nexport default function AnimatedView(props) {\r\n  let propStyles = props.style || {}\r\n  let style = { position: 'relative', display: 'flex', ...propStyles}\r\n\r\n  return (\r\n    <Animated.div {...props} style={style}>\r\n      {props.children}\r\n    </Animated.div>\r\n  )\r\n}"],"names":["createArea","boundaries","minPoint","x","undefined","left","Infinity","y","top","maxPoint","right","bottom","createAreaFromRadius","radius","anchor","isPointInArea","area","findClosest","origin","points","minDistance","closestPoint","forEach","point","distance","_this","getDistance","relative","p","r","dx","Math","abs","dy","sqrt","getDelta","def","value","defaultValue","create","options","isTemp","x0","y0","priority","type","doFrame","deltaTime","state","coords","vx","vy","bounce","influence","target","setTranslationX","setTranslationY","friction","damping","Utils","influenceArea","pow","gravity","strength","falloff","dr","a","exp","mass","ax","ay","spring","tension","requestAnimationFrame","Animated","PanResponder","PhysicsAnimator","View","listener","debug","animatorListener","nofn","debugStart","debugEnd","frameTimeMillis","this","isRunning","lastFrameTS","animateFrameWithDeltaTime","onAnimationFrame","Date","now","behavior","debugB","debugInitialV","physicsObject","console","log","dvx","dvy","behaviors","hadMovement","getTranslation","_this2","Behaviors","animate","cfwnm","consecutiveFramesWithNoMovement","isDragging","stopRunning","onAnimatorPause","b","idx","length","splice","ensureRunning","condition","i","remove","startRunning","_this3","removeTempBehaviors","propBehaviors","frictionAreas","gravityPoints","springPoints","isWeb","document","props","propStyles","style","position","display","React","div","children","initialPosition","animated","ValueXY","animator","createAnimator","insideAlertAreas","propAreas","alert","_pr","createPanResponder","setPropBehaviours","getAnimated","setValue","_startingValue","lastEnd","Component","withPosition","transform","translateX","translateY","concat","panHandlers","dragEnabled","_value","_offset","tx","animatedValueX","ty","animatedValueY","Animator","round","onStop","reportAlertEvent","setTranslation","capturer","checkResponderCapture","bind","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","onPanResponderGrant","e","_captured","startDrag","onPanResponderMove","gesture","onDragging","onPanResponderRelease","endDrag","inside","onAlert","id","ev","offset","setOffset","dragBoundaries","onDrag","dragStartLocation","addTempDragBehavior","dragWithSpring","styles","body","userSelectCache","userSelect","pos","verticalOnly","dragBehavior","horizontalOnly","dragWithSprings","velocity","getVelocity","toss","dragToss","projectedCenter","snapPoint","snapPoints","targetSnapPointId","addTempSnapToPointBehavior","addTempBoundaries","flattenOffset","drag","addBehavior","onSnap","onSnapStart","index","indexOf","springOptions","prevProps","Object","keys","prop","_this4","removeTypeBehaviors","addTypeBehaviors","alertAreas","push","removeBehavior","oldBoundariesBehavior","_this5","PropTypes","array","bool","object","instanceOf","Value","func","onEnd","number"],"mappings":"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"}